collect_usage_data: false
auto_merge: false
projects:
- name: gcs
  dir: gcs
  workspace: default
  terragrunt: false
  workflow: gcs
workflows:
  gcs:
    init:
      steps:
      - init:
        extra_args: ["backend-config=../backend.hcl"]
      - run: "terraform init"
      - init
    plan:
      steps:
      - init:
        extra_args: ["backend-config=../backend.hcl"]
      - run: "echo hello world"
      - plan
    apply:
      steps:
      - run: "echo hello world"
        shell: zsh
      - init
      - apply:
        extra_args: ["-compact-warnings"]
    workflow_configuration:
      on_pull_request_pushed: ["digger plan"]
      on_pull_request_closed: ["digger unlock"]
      on_commit_to_default: ["digger apply"]